# Azure Container Instance deployment template
# Replace placeholders with your actual values before deployment

apiVersion: 2021-10-01
location: eastus
name: health-research-agent-api
properties:
  containers:
  - name: health-research-agent-api
    properties:
      image: <your-registry>.azurecr.io/health-research-agent-api:latest
      resources:
        requests:
          cpu: 1.0
          memoryInGb: 2.0
      ports:
      - port: 8000
        protocol: TCP
      environmentVariables:
      - name: DB_HOST
        value: <your-azure-postgres-server>.postgres.database.azure.com
      - name: DB_PORT
        value: "5432"
      - name: DB_USER
        value: <your-db-username>
      - name: DB_PASSWORD
        secureValue: <your-db-password>
      - name: DB_NAME
        value: postgres
      - name: AGNO_API_KEY
        secureValue: <your-agno-api-key>
      - name: AZURE_OPENAI_API_KEY
        secureValue: <your-azure-openai-api-key>
      - name: AZURE_OPENAI_ENDPOINT
        value: https://<your-azure-openai-instance>.openai.azure.com
      - name: GOOGLE_API_KEY
        secureValue: <your-google-api-key>
      - name: ENVIRONMENT
        value: production
      - name: PYTHONUNBUFFERED
        value: "1"
  osType: Linux
  restartPolicy: Always
  ipAddress:
    type: Public
    ports:
    - protocol: TCP
      port: 8000
  imageRegistryCredentials:
  - server: <your-registry>.azurecr.io
    username: <acr-username>
    password: <acr-password>
tags:
  project: health-research-agent
  environment: production
